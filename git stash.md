#Git  #КомандыGIT 

Команда `git stash` — это полезный инструмент в Git, который позволяет временно сохранить незавершенные изменения в вашем рабочем каталоге и индексе, чтобы позже продолжить работу с ними. Представьте ситуацию, когда вы начали вносить изменения в код, но внезапно возникла необходимость переключиться на другую задачу или ветку, а ваш текущий рабочий каталог еще не готов для фиксации (коммита). Вместо того чтобы создавать новый коммит с незавершенными изменениями, вы можете использовать `stash`, чтобы спрятать их и очистить рабочую директорию.

### Как работает `git stash`

1. Команда сохраняет ваши текущие изменения (включая внесенные в индексированные файлы) в специальную область стэша (_stash_), освобождая рабочий каталог и индекс.
2. После выполнения команды ваша рабочая директория возвращается к состоянию последней зафиксированной версии (commit).
3. Позже вы можете восстановить сохраненные изменения из стэша, продолжив работу с ними.

Пример использования:

```git
git stash
```

Эта команда сохранит все изменения текущего рабочего каталога и индекса в стэш, очищая вашу директорию до состояния последнего коммита.

### Варианты использования `git stash`

1. **Простое сохранение изменений**:
    
    ```git
    git stash
    ```
    
    Этот вариант сохраняет все текущие изменения (как добавленные в индекс, так и оставшиеся вне индекса) в стек стэшей.
2. **Сохранение только отслеживаемых файлов**:
    
    ```git
    git stash save --keep-index
    ```
    
    Этот вариант сохраняет только те изменения, которые были добавлены в индекс (через `git add`), оставляя все остальные изменения в рабочем каталоге.
3. **Удаление определенных файлов из стэша**:
    
    ```git
    git stash push -m "my_stash_message" path/to/file
    ```
    
    Здесь сохраняется только указанный файл или путь, игнорируя другие изменения.
4. **Добавление комментария к стэшу**:
    
    ```git
    git stash save "description of changes"
    ```
    
    Добавляет сообщение, которое поможет идентифицировать конкретный стэш в будущем.

### Просмотр списка стэшей

Чтобы увидеть список всех сохраненных стэшей, выполните следующую команду:

```git
git stash list
```

Она выведет список всех ваших стэшей вместе с кратким описанием изменений и номером каждого стэша (по умолчанию они нумеруются начиная с 0).

### Применение сохраненного стэша

Когда придет время снова поработать с вашими сохраненными изменениями, вы можете применить их с помощью команды:

```git
git stash apply
```

Эта команда применяет последний сохраненный стэш (с номером 0) к вашему рабочему каталогу. Если хотите применить определенный стэш, укажите его номер:

```git
git stash apply stash@{n}
```

где `{n}` — это номер нужного стэша.

### Удаление стэша

Если стэш больше не нужен, его можно удалить:

```git
git stash drop
```

Эта команда удаляет последний стэш. Чтобы удалить конкретный стэш, укажите его номер:

```git
git stash drop stash@{n}
```

### Популярный сценарий использования `git stash`

Представьте, что вы работаете над новой функцией, но вдруг вам срочно нужно исправить критический баг. Вместо того чтобы сохранять промежуточный результат своей работы через обычный коммит, вы используете `git stash`, чтобы быстро освободить рабочую директорию и перейти на нужную ветку для исправления бага. После этого вы возвращаетесь к своему незавершенному функционалу, восстанавливая стэш.

### Ограничения и нюансы

1. **Неотслеживаемые файлы**: Команда `git stash` не сохраняет неотслеживаемые файлы (те, которые еще не были добавлены в индекс или не управляются Git'ом). Чтобы учесть такие файлы, нужно использовать параметр `--include-untracked`.
2. **Очистка индексов**: Если у вас есть изменения, добавленные в индекс, команда `git stash` вернет индекс в состояние последнего коммита. Используйте `--keep-index`, если хотите оставить изменения в индексе.
3. **Конфликты**: Если при восстановлении стэша возникнут конфликты, Git предложит вам решить их вручную, как при обычном слиянии веток.

### Заключение

Команда `git stash` — это мощный инструмент для управления временными изменениями в рабочем процессе. С её помощью можно легко переключаться между задачами, сохраняя текущее состояние работы и возвращаясь к нему в удобное время.

[[Ветки]]
[[Команды Git]]
[[Git]]
[[Репозиторий]]